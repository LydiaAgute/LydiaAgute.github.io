import{_ as E,c as h,o as c,a as s,w as b,v as A,t as f,b as z,d as R,n as y,e as k,F as p,r as w}from"./index-f4Mypkdm.js";const L={name:"JumpSquare",data(){return{matrixRows:5,matrixCols:5,startMatrix:this.createEmptyMatrix(5,5),targetMatrix:this.createEmptyMatrix(5,5),solution:[],isLoading:!1,activeMatrix:"start",hasAttemptedSolve:!1,miniMatrixRows:5,miniMatrixCols:5}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.matrixCols}, 40px)`,gridTemplateRows:`repeat(${this.matrixRows}, 40px)`,width:`calc(${this.matrixCols} * 40px + ${this.matrixCols-1} * 3px + 30px)`,height:`calc(${this.matrixRows} * 40px + ${this.matrixRows-1} * 3px + 30px)`}},miniMatrixStyle(){return{gridTemplateColumns:`repeat(${this.miniMatrixCols}, 12px)`,gridTemplateRows:`repeat(${this.miniMatrixRows}, 12px)`}},fixedPositionsMatch(){for(let e=0;e<this.matrixRows;e++)for(let t=0;t<this.matrixCols;t++)if(this.startMatrix[e][t]===-1!=(this.targetMatrix[e][t]===-1))return!1;return!0},canSolve(){return this.fixedPositionsMatch},resultClass(){return this.hasAttemptedSolve?this.solution&&this.solution.length>0?"success":"error":""},resultMessage(){return this.solution&&this.solution.length===0?"æ— æ³•å®Œæˆè½¬æ¢":`æ‰¾åˆ° ${this.solution.length} ä¸ªéœ€è¦ç‚¹å‡»çš„ä½ç½®`},stats(){let e={"-1":0,0:0,1:0},t={"-1":0,0:0,1:0};for(let n=0;n<this.matrixRows;n++)for(let m=0;m<this.matrixCols;m++)e[this.startMatrix[n][m]]++,t[this.targetMatrix[n][m]]++;return{startCounts:e,targetCounts:t}}},methods:{createEmptyMatrix(e,t){return Array(e).fill().map(()=>Array(t).fill(-1))},getCellClass(e){switch(e){case-1:return"gray";case 0:return"blue";case 1:return"red";default:return"gray"}},toggleCell(e,t,n){const m=e[t][n];let i;m===-1?i=0:m===0?i=1:i=-1,e[t][n]=i},handleCellClick(e,t,n){this.activeMatrix=e,e==="start"?this.toggleCell(this.startMatrix,t,n):this.toggleCell(this.targetMatrix,t,n)},async solve(){if(this.canSolve){this.isLoading=!0,this.solution=[],this.hasAttemptedSolve=!1,await new Promise(e=>setTimeout(e,300));try{const e=this.matrixSolverSolveLighting(this.startMatrix.map(t=>[...t]),this.targetMatrix.map(t=>[...t]));this.solution=e,this.hasAttemptedSolve=!0}catch(e){console.error("æ±‚è§£é”™è¯¯:",e),this.solution=[],this.hasAttemptedSolve=!0}finally{this.isLoading=!1}}},reset(){this.startMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.targetMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.solution=[],this.activeMatrix="start",this.hasAttemptedSolve=!1},handleSizeChange(){this.matrixRows<1&&(this.matrixRows=1),this.matrixRows>10&&(this.matrixRows=10),this.matrixCols<1&&(this.matrixCols=1),this.matrixCols>10&&(this.matrixCols=10),this.miniMatrixRows=this.matrixRows,this.miniMatrixCols=this.matrixCols,this.startMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.targetMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.solution=[],this.hasAttemptedSolve=!1},getMiniCellClass(e,t,n){return t===e[0]&&n===e[1]?"highlight":""},matrixSolverGaussianElimination(e,t){const n=e.length;if(n===0)return[];const m=e[0].length,i=e.map((a,v)=>[...a,t[v]]);let l=0,o=0;const d=[];for(;l<n&&o<m;){let a=l;for(;a<n&&i[a][o]===0;)a++;if(a===n){o++;continue}[i[l],i[a]]=[i[a],i[l]];for(let v=l+1;v<n;v++)if(i[v][o]===1)for(let g=o;g<=m;g++)i[v][g]^=i[l][g];d.push({row:l,col:o}),l++,o++}for(let a=0;a<n;a++){let v=!0;for(let g=0;g<m;g++)if(i[a][g]!==0){v=!1;break}if(v&&i[a][m]===1)return null}const x=new Array(m).fill(0);for(let a=d.length-1;a>=0;a--){const{row:v,col:g}=d[a];x[g]=i[v][m];for(let C=0;C<v;C++)i[C][g]===1&&(i[C][m]^=x[g])}return x},matrixSolverSolveLighting(e,t){const n=this.matrixRows,m=this.matrixCols;for(let r=0;r<n;r++)for(let u=0;u<m;u++){const S=e[r][u]===-1,M=t[r][u]===-1;if(S!==M)return[];if(S&&e[r][u]!==t[r][u])return[]}const i=Array(n).fill().map(()=>Array(m).fill(0)),l=Array(n).fill().map(()=>Array(m).fill(!1));for(let r=0;r<n;r++)for(let u=0;u<m;u++)l[r][u]=e[r][u]!==-1,l[r][u]&&(i[r][u]=e[r][u]!==t[r][u]?1:0);const o=[],d=Array(n).fill().map(()=>Array(m).fill(-1));let x=0;for(let r=0;r<n;r++)for(let u=0;u<m;u++)l[r][u]&&(d[r][u]=x,o.push([r,u]),x++);if(x===0)return[];const a=[],v=[];for(let r=0;r<n;r++)for(let u=0;u<m;u++)if(l[r][u]){const S=new Array(x).fill(0);for(let M=Math.max(0,r-1);M<=Math.min(n-1,r+1);M++)for(let _=Math.max(0,u-1);_<=Math.min(m-1,u+1);_++)d[M][_]!==-1&&(S[d[M][_]]^=1);a.push(S),v.push(i[r][u])}if(a.length===0)return[];const g=this.matrixSolverGaussianElimination(a,v);if(g===null)return[];const C=[];for(let r=0;r<x;r++)g[r]===1&&C.push(o[r]);return C}}},V={class:"container"},j={class:"configuration"},N={class:"config-group"},F={class:"config-item"},P={class:"config-item"},T={class:"config-hint"},q={class:"description"},B={key:0,class:"warning-text"},I={class:"stats"},D={class:"stat-item"},G={class:"stat-value"},J={class:"stat-item"},U={class:"stat-value"},Z={class:"stat-item"},H={class:"stat-value"},K={class:"matrices-container"},O=["onClick"],Q=["onClick"],W={class:"controls"},X=["disabled"],Y={key:0,class:"loading"},$={class:"result-section"},tt={key:0},st={class:"result-message"},it={class:"solution-steps-container"},et={class:"step-number"},lt={class:"step-coord"},rt={key:1,class:"no-solution"},ot={key:2,class:"error-message"},at={key:3,class:"placeholder"},nt={class:"instructions"};function ut(e,t,n,m,i,l){return c(),h("div",V,[t[19]||(t[19]=s("h1",null,"ğŸ¯ æ°´æ™¶æŸ±è§£è°œå·¥å…·",-1)),s("div",j,[s("div",N,[s("div",F,[t[6]||(t[6]=s("label",{for:"matrix-rows"},"è¡Œæ•° (m): ",-1)),b(s("input",{id:"matrix-rows","onUpdate:modelValue":t[0]||(t[0]=o=>i.matrixRows=o),type:"number",min:"1",max:"10",onChange:t[1]||(t[1]=(...o)=>l.handleSizeChange&&l.handleSizeChange(...o))},null,544),[[A,i.matrixRows,void 0,{number:!0}]])]),s("div",P,[t[7]||(t[7]=s("label",{for:"matrix-cols"},"åˆ—æ•° (n): ",-1)),b(s("input",{id:"matrix-cols","onUpdate:modelValue":t[2]||(t[2]=o=>i.matrixCols=o),type:"number",min:"1",max:"10",onChange:t[3]||(t[3]=(...o)=>l.handleSizeChange&&l.handleSizeChange(...o))},null,544),[[A,i.matrixCols,void 0,{number:!0}]])])]),s("div",T,"æ”¯æŒ 1-10 çš„æ•´æ•°ï¼Œå½“å‰çŸ©é˜µ: "+f(i.matrixRows)+"Ã—"+f(i.matrixCols),1)]),s("div",q,[t[8]||(t[8]=s("p",null,[R(" ç‚¹å‡»çŸ©é˜µå•å…ƒæ ¼åœ¨ä¸‰ç§çŠ¶æ€é—´åˆ‡æ¢ï¼š "),s("span",{class:"color-sample gray"},"ç°è‰²(-1)"),R("ã€ "),s("span",{class:"color-sample blue"},"è“è‰²(0)"),R("ã€ "),s("span",{class:"color-sample red"},"çº¢è‰²(1)")],-1)),l.fixedPositionsMatch?z("",!0):(c(),h("p",B," âš ï¸ è­¦å‘Šï¼šä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²å›ºå®šä½ç½®å¿…é¡»ä¸€è‡´ï¼ "))]),s("div",I,[s("div",D,[s("div",G,f(l.stats.startCounts[-1]),1),t[9]||(t[9]=s("div",{class:"stat-label"},"èµ·å§‹çŸ©é˜µå›ºå®šç‚¹",-1))]),s("div",J,[s("div",U,f(l.stats.targetCounts[-1]),1),t[10]||(t[10]=s("div",{class:"stat-label"},"ç›®æ ‡çŸ©é˜µå›ºå®šç‚¹",-1))]),s("div",Z,[s("div",H,f(i.solution.length),1),t[11]||(t[11]=s("div",{class:"stat-label"},"éœ€è¦ç‚¹å‡»æ•°",-1))])]),s("div",K,[s("div",{class:y(["matrix-section",{active:i.activeMatrix==="start"}])},[s("h2",null,"èµ·å§‹çŸ©é˜µ ("+f(i.matrixRows)+"Ã—"+f(i.matrixCols)+")",1),s("div",{class:"matrix",style:k(l.gridStyle)},[(c(!0),h(p,null,w(i.startMatrix,(o,d)=>(c(),h("div",{key:"start-row-"+d,class:"matrix-row"},[(c(!0),h(p,null,w(o,(x,a)=>(c(),h("div",{key:"start-"+d+"-"+a,class:y(["cell",l.getCellClass(x)]),onClick:v=>l.handleCellClick("start",d,a)},f(x),11,O))),128))]))),128))],4)],2),s("div",{class:y(["matrix-section",{active:i.activeMatrix==="target"}])},[s("h2",null,"ç›®æ ‡çŸ©é˜µ ("+f(i.matrixRows)+"Ã—"+f(i.matrixCols)+")",1),s("div",{class:"matrix",style:k(l.gridStyle)},[(c(!0),h(p,null,w(i.targetMatrix,(o,d)=>(c(),h("div",{key:"target-row-"+d,class:"matrix-row"},[(c(!0),h(p,null,w(o,(x,a)=>(c(),h("div",{key:"target-"+d+"-"+a,class:y(["cell",l.getCellClass(x)]),onClick:v=>l.handleCellClick("target",d,a)},f(x),11,Q))),128))]))),128))],4)],2)]),s("div",W,[s("button",{class:"solve-button",onClick:t[4]||(t[4]=(...o)=>l.solve&&l.solve(...o)),disabled:!l.canSolve||i.isLoading},[i.isLoading?(c(),h("span",Y)):z("",!0),R(" "+f(i.isLoading?"æ±‚è§£ä¸­...":"æäº¤æ±‚è§£"),1)],8,X),s("button",{class:"reset-button",onClick:t[5]||(t[5]=(...o)=>l.reset&&l.reset(...o))},"é‡ç½®çŸ©é˜µ")]),s("div",$,[t[12]||(t[12]=s("h3",null,"æ±‚è§£ç»“æœ",-1)),s("div",{class:y(["result-display",l.resultClass])},[i.solution&&i.solution.length>0?(c(),h("div",tt,[s("div",st,f(l.resultMessage),1),s("div",it,[(c(!0),h(p,null,w(i.solution,(o,d)=>(c(),h("div",{key:d,class:"solution-step"},[s("div",et,f(d+1),1),s("div",{class:"step-mini-matrix",style:k(l.miniMatrixStyle)},[(c(!0),h(p,null,w(i.matrixRows,x=>(c(),h("div",{key:"row-"+x,class:"mini-row"},[(c(!0),h(p,null,w(i.matrixCols,a=>(c(),h("div",{key:"cell-"+x+"-"+a,class:y(["mini-cell",l.getMiniCellClass(o,x-1,a-1)])},null,2))),128))]))),128))],4),s("div",lt,"("+f(o[0])+", "+f(o[1])+")",1)]))),128))])])):i.solution&&i.solution.length===0&&i.hasAttemptedSolve?(c(),h("div",rt," æ— æ³•å®Œæˆè½¬æ¢ ")):l.canSolve?(c(),h("div",at,"ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...")):(c(),h("div",ot,"è¯·ç¡®ä¿ä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²ä½ç½®ä¸€è‡´"))],2)]),s("div",nt,[t[18]||(t[18]=s("h4",null,"ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š",-1)),s("ul",null,[t[13]||(t[13]=s("li",null,"ç‚¹å‡»çŸ©é˜µå•å…ƒæ ¼åœ¨ä¸‰ç§çŠ¶æ€é—´å¾ªç¯åˆ‡æ¢",-1)),t[14]||(t[14]=s("li",null,"ç°è‰²(-1)è¡¨ç¤ºå›ºå®šä½ç½®ï¼Œæ“ä½œä¸ä¼šæ”¹å˜è¿™äº›ä½ç½®",-1)),t[15]||(t[15]=s("li",null,"ç¡®ä¿ä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²ä½ç½®å®Œå…¨ä¸€è‡´æ‰èƒ½æ±‚è§£",-1)),s("li",null,"åæ ‡ä»(0,0)åˆ°("+f(i.matrixRows-1)+","+f(i.matrixCols-1)+")ï¼Œè¡Œåœ¨å‰ï¼Œåˆ—åœ¨å",1),t[16]||(t[16]=s("li",null,"å¯ä»¥è‡ªå®šä¹‰çŸ©é˜µå¤§å°ï¼Œæ”¯æŒ 1Ã—1 åˆ° 10Ã—10 çš„ä»»æ„çŸ©å½¢çŸ©é˜µ",-1)),t[17]||(t[17]=s("li",null,"ç‚¹å‡»æ“ä½œä¼šå½±å“å½“å‰ä½ç½®åŠå…¶å‘¨å›´3Ã—3åŒºåŸŸ",-1))])])])}const ht=E(L,[["render",ut],["__scopeId","data-v-7a23b9b3"]]);export{ht as default};
