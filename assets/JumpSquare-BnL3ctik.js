import{_ as E,c as d,o as x,a as s,w as R,v as b,t as f,b as A,d as k,n as w,e as z,F as M,r as S}from"./index-BMgU4Ue-.js";const L={name:"JumpSquare",data(){return{matrixRows:5,matrixCols:5,startMatrix:this.createEmptyMatrix(5,5),targetMatrix:this.createEmptyMatrix(5,5),solution:[],isLoading:!1,activeMatrix:"start",hasAttemptedSolve:!1}},computed:{gridStyle(){return{gridTemplateColumns:`repeat(${this.matrixCols}, 40px)`,gridTemplateRows:`repeat(${this.matrixRows}, 40px)`,width:`calc(${this.matrixCols} * 40px + ${this.matrixCols-1} * 3px + 30px)`,height:`calc(${this.matrixRows} * 40px + ${this.matrixRows-1} * 3px + 30px)`}},fixedPositionsMatch(){for(let l=0;l<this.matrixRows;l++)for(let t=0;t<this.matrixCols;t++)if(this.startMatrix[l][t]===-1!=(this.targetMatrix[l][t]===-1))return!1;return!0},canSolve(){return this.fixedPositionsMatch},resultClass(){return this.hasAttemptedSolve?this.solution&&this.solution.length>0?"success":"error":""},resultMessage(){return this.solution&&this.solution.length===0?"æ— æ³•å®Œæˆè½¬æ¢":`æ‰¾åˆ° ${this.solution.length} ä¸ªéœ€è¦ç‚¹å‡»çš„ä½ç½®`},stats(){let l={"-1":0,0:0,1:0},t={"-1":0,0:0,1:0};for(let n=0;n<this.matrixRows;n++)for(let h=0;h<this.matrixCols;h++)l[this.startMatrix[n][h]]++,t[this.targetMatrix[n][h]]++;return{startCounts:l,targetCounts:t}}},methods:{createEmptyMatrix(l,t){return Array(l).fill().map(()=>Array(t).fill(-1))},getCellClass(l){switch(l){case-1:return"gray";case 0:return"blue";case 1:return"red";default:return"gray"}},toggleCell(l,t,n){const h=l[t][n];let i;h===-1?i=0:h===0?i=1:i=-1,l[t][n]=i},handleCellClick(l,t,n){this.activeMatrix=l,l==="start"?this.toggleCell(this.startMatrix,t,n):this.toggleCell(this.targetMatrix,t,n)},async solve(){if(this.canSolve){this.isLoading=!0,this.solution=[],this.hasAttemptedSolve=!1,await new Promise(l=>setTimeout(l,300));try{const l=this.matrixSolverSolveLighting(this.startMatrix.map(t=>[...t]),this.targetMatrix.map(t=>[...t]));this.solution=l,this.hasAttemptedSolve=!0}catch(l){console.error("æ±‚è§£é”™è¯¯:",l),this.solution=[],this.hasAttemptedSolve=!0}finally{this.isLoading=!1}}},reset(){this.startMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.targetMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.solution=[],this.activeMatrix="start",this.hasAttemptedSolve=!1},handleSizeChange(){this.matrixRows<1&&(this.matrixRows=1),this.matrixRows>10&&(this.matrixRows=10),this.matrixCols<1&&(this.matrixCols=1),this.matrixCols>10&&(this.matrixCols=10),this.startMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.targetMatrix=this.createEmptyMatrix(this.matrixRows,this.matrixCols),this.solution=[],this.hasAttemptedSolve=!1},matrixSolverGaussianElimination(l,t){const n=l.length;if(n===0)return[];const h=l[0].length,i=l.map((u,c)=>[...u,t[c]]);let e=0,o=0;const m=[];for(;e<n&&o<h;){let u=e;for(;u<n&&i[u][o]===0;)u++;if(u===n){o++;continue}[i[e],i[u]]=[i[u],i[e]];for(let c=e+1;c<n;c++)if(i[c][o]===1)for(let g=o;g<=h;g++)i[c][g]^=i[e][g];m.push({row:e,col:o}),e++,o++}for(let u=0;u<n;u++){let c=!0;for(let g=0;g<h;g++)if(i[u][g]!==0){c=!1;break}if(c&&i[u][h]===1)return null}const v=new Array(h).fill(0);for(let u=m.length-1;u>=0;u--){const{row:c,col:g}=m[u];v[g]=i[c][h];for(let C=0;C<c;C++)i[C][g]===1&&(i[C][h]^=v[g])}return v},matrixSolverSolveLighting(l,t){const n=this.matrixRows,h=this.matrixCols;for(let r=0;r<n;r++)for(let a=0;a<h;a++){const y=l[r][a]===-1,p=t[r][a]===-1;if(y!==p)return[];if(y&&l[r][a]!==t[r][a])return[]}const i=Array(n).fill().map(()=>Array(h).fill(0)),e=Array(n).fill().map(()=>Array(h).fill(!1));for(let r=0;r<n;r++)for(let a=0;a<h;a++)e[r][a]=l[r][a]!==-1,e[r][a]&&(i[r][a]=l[r][a]!==t[r][a]?1:0);const o=[],m=Array(n).fill().map(()=>Array(h).fill(-1));let v=0;for(let r=0;r<n;r++)for(let a=0;a<h;a++)e[r][a]&&(m[r][a]=v,o.push([r,a]),v++);if(v===0)return[];const u=[],c=[];for(let r=0;r<n;r++)for(let a=0;a<h;a++)if(e[r][a]){const y=new Array(v).fill(0);for(let p=Math.max(0,r-1);p<=Math.min(n-1,r+1);p++)for(let _=Math.max(0,a-1);_<=Math.min(h-1,a+1);_++)m[p][_]!==-1&&(y[m[p][_]]^=1);u.push(y),c.push(i[r][a])}if(u.length===0)return[];const g=this.matrixSolverGaussianElimination(u,c);if(g===null)return[];const C=[];for(let r=0;r<v;r++)g[r]===1&&C.push(o[r]);return C}}},V={class:"container"},j={class:"configuration"},N={class:"config-group"},F={class:"config-item"},P={class:"config-item"},q={class:"config-hint"},B={class:"description"},I={key:0,class:"warning-text"},D={class:"stats"},G={class:"stat-item"},J={class:"stat-value"},T={class:"stat-item"},U={class:"stat-value"},Z={class:"stat-item"},H={class:"stat-value"},K={class:"matrices-container"},O=["onClick"],Q=["onClick"],W={class:"controls"},X=["disabled"],Y={key:0,class:"loading"},$={class:"result-section"},tt={key:0},st={class:"result-message"},it={class:"coordinates-container"},et={key:1,class:"no-solution"},lt={key:2,class:"error-message"},rt={key:3,class:"placeholder"},ot={class:"instructions"};function at(l,t,n,h,i,e){return x(),d("div",V,[t[19]||(t[19]=s("h1",null,"ğŸ¯ æ°´æ™¶æŸ±è§£è°œå·¥å…·",-1)),s("div",j,[s("div",N,[s("div",F,[t[6]||(t[6]=s("label",{for:"matrix-rows"},"è¡Œæ•° (m): ",-1)),R(s("input",{id:"matrix-rows","onUpdate:modelValue":t[0]||(t[0]=o=>i.matrixRows=o),type:"number",min:"1",max:"10",onChange:t[1]||(t[1]=(...o)=>e.handleSizeChange&&e.handleSizeChange(...o))},null,544),[[b,i.matrixRows,void 0,{number:!0}]])]),s("div",P,[t[7]||(t[7]=s("label",{for:"matrix-cols"},"åˆ—æ•° (n): ",-1)),R(s("input",{id:"matrix-cols","onUpdate:modelValue":t[2]||(t[2]=o=>i.matrixCols=o),type:"number",min:"1",max:"10",onChange:t[3]||(t[3]=(...o)=>e.handleSizeChange&&e.handleSizeChange(...o))},null,544),[[b,i.matrixCols,void 0,{number:!0}]])])]),s("div",q,"æ”¯æŒ 1-10 çš„æ•´æ•°ï¼Œå½“å‰çŸ©é˜µ: "+f(i.matrixRows)+"Ã—"+f(i.matrixCols),1)]),s("div",B,[t[8]||(t[8]=s("p",null,[k(" ç‚¹å‡»çŸ©é˜µå•å…ƒæ ¼åœ¨ä¸‰ç§çŠ¶æ€é—´åˆ‡æ¢ï¼š "),s("span",{class:"color-sample gray"},"ç°è‰²(-1)"),k("ã€ "),s("span",{class:"color-sample blue"},"è“è‰²(0)"),k("ã€ "),s("span",{class:"color-sample red"},"çº¢è‰²(1)")],-1)),e.fixedPositionsMatch?A("",!0):(x(),d("p",I," âš ï¸ è­¦å‘Šï¼šä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²å›ºå®šä½ç½®å¿…é¡»ä¸€è‡´ï¼ "))]),s("div",D,[s("div",G,[s("div",J,f(e.stats.startCounts[-1]),1),t[9]||(t[9]=s("div",{class:"stat-label"},"èµ·å§‹çŸ©é˜µå›ºå®šç‚¹",-1))]),s("div",T,[s("div",U,f(e.stats.targetCounts[-1]),1),t[10]||(t[10]=s("div",{class:"stat-label"},"ç›®æ ‡çŸ©é˜µå›ºå®šç‚¹",-1))]),s("div",Z,[s("div",H,f(i.solution.length),1),t[11]||(t[11]=s("div",{class:"stat-label"},"éœ€è¦ç‚¹å‡»æ•°",-1))])]),s("div",K,[s("div",{class:w(["matrix-section",{active:i.activeMatrix==="start"}])},[s("h2",null,"èµ·å§‹çŸ©é˜µ ("+f(i.matrixRows)+"Ã—"+f(i.matrixCols)+")",1),s("div",{class:"matrix",style:z(e.gridStyle)},[(x(!0),d(M,null,S(i.startMatrix,(o,m)=>(x(),d("div",{key:"start-row-"+m,class:"matrix-row"},[(x(!0),d(M,null,S(o,(v,u)=>(x(),d("div",{key:"start-"+m+"-"+u,class:w(["cell",e.getCellClass(v)]),onClick:c=>e.handleCellClick("start",m,u)},f(v),11,O))),128))]))),128))],4)],2),s("div",{class:w(["matrix-section",{active:i.activeMatrix==="target"}])},[s("h2",null,"ç›®æ ‡çŸ©é˜µ ("+f(i.matrixRows)+"Ã—"+f(i.matrixCols)+")",1),s("div",{class:"matrix",style:z(e.gridStyle)},[(x(!0),d(M,null,S(i.targetMatrix,(o,m)=>(x(),d("div",{key:"target-row-"+m,class:"matrix-row"},[(x(!0),d(M,null,S(o,(v,u)=>(x(),d("div",{key:"target-"+m+"-"+u,class:w(["cell",e.getCellClass(v)]),onClick:c=>e.handleCellClick("target",m,u)},f(v),11,Q))),128))]))),128))],4)],2)]),s("div",W,[s("button",{class:"solve-button",onClick:t[4]||(t[4]=(...o)=>e.solve&&e.solve(...o)),disabled:!e.canSolve||i.isLoading},[i.isLoading?(x(),d("span",Y)):A("",!0),k(" "+f(i.isLoading?"æ±‚è§£ä¸­...":"æäº¤æ±‚è§£"),1)],8,X),s("button",{class:"reset-button",onClick:t[5]||(t[5]=(...o)=>e.reset&&e.reset(...o))},"é‡ç½®çŸ©é˜µ")]),s("div",$,[t[12]||(t[12]=s("h3",null,"æ±‚è§£ç»“æœ",-1)),s("div",{class:w(["result-display",e.resultClass])},[i.solution&&i.solution.length>0?(x(),d("div",tt,[s("div",st,f(e.resultMessage),1),s("div",it,[(x(!0),d(M,null,S(i.solution,(o,m)=>(x(),d("span",{key:m,class:"coordinate"}," ("+f(o[0])+", "+f(o[1])+") ",1))),128))])])):i.solution&&i.solution.length===0&&i.hasAttemptedSolve?(x(),d("div",et," æ— æ³•å®Œæˆè½¬æ¢ ")):e.canSolve?(x(),d("div",rt,"ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...")):(x(),d("div",lt,"è¯·ç¡®ä¿ä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²ä½ç½®ä¸€è‡´"))],2)]),s("div",ot,[t[18]||(t[18]=s("h4",null,"ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š",-1)),s("ul",null,[t[13]||(t[13]=s("li",null,"ç‚¹å‡»çŸ©é˜µå•å…ƒæ ¼åœ¨ä¸‰ç§çŠ¶æ€é—´å¾ªç¯åˆ‡æ¢",-1)),t[14]||(t[14]=s("li",null,"ç°è‰²(-1)è¡¨ç¤ºå›ºå®šä½ç½®ï¼Œæ“ä½œä¸ä¼šæ”¹å˜è¿™äº›ä½ç½®",-1)),t[15]||(t[15]=s("li",null,"ç¡®ä¿ä¸¤ä¸ªçŸ©é˜µçš„ç°è‰²ä½ç½®å®Œå…¨ä¸€è‡´æ‰èƒ½æ±‚è§£",-1)),s("li",null,"åæ ‡ä»(0,0)åˆ°("+f(i.matrixRows-1)+","+f(i.matrixCols-1)+")ï¼Œè¡Œåœ¨å‰ï¼Œåˆ—åœ¨å",1),t[16]||(t[16]=s("li",null,"å¯ä»¥è‡ªå®šä¹‰çŸ©é˜µå¤§å°ï¼Œæ”¯æŒ 1Ã—1 åˆ° 10Ã—10 çš„ä»»æ„çŸ©å½¢çŸ©é˜µ",-1)),t[17]||(t[17]=s("li",null,"ç‚¹å‡»æ“ä½œä¼šå½±å“å½“å‰ä½ç½®åŠå…¶å‘¨å›´3Ã—3åŒºåŸŸ",-1))])])])}const ut=E(L,[["render",at],["__scopeId","data-v-7b9a9da4"]]);export{ut as default};
